---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';
import { Image } from 'astro:assets';
import fampayLogo from '../assets/fampay_logo.png';
import grapevineLogo from '../assets/grapevine_logo.png';
import takeuforwardLogo from '../assets/takeuforward_logo.png';
import gsocLogo from '../assets/gsoc_logo.png';

// Fetch GitHub Contributions
let contributions = [];
let totalContributions = 0;
try {
	const res = await fetch('https://github-contributions-api.jogruber.de/v4/aialok?y=last');
	if (res.ok) {
		const data = await res.json();
		contributions = data.contributions || [];
		totalContributions = data.total?.lastYear || 0;
	}
} catch (e) {
	console.error("Failed to fetch contributions", e);
}
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<!-- Northern Lights & Snow -->
		<div class="background-gradient">
			<div class="aurora"></div>
		</div>
		<div id="snow-container" class="snow-container"></div>

		<main>
			<!-- Hero Section -->
			<div class="hero animate">
				<div class="hero-header-row">
					<div class="name-wrapper">
						<!-- SVG Santa Hat -->
						<svg class="svg-hat" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M20 80C20 80 35 30 70 20C70 20 60 50 80 80" fill="#DC2626" stroke="#DC2626" stroke-width="2"/>
							<circle cx="85" cy="85" r="10" fill="white"/>
							<rect x="15" y="80" width="70" height="15" rx="7.5" fill="white"/>
							<path d="M20 80C35 50 50 35 70 20" stroke="white" stroke-width="2" stroke-opacity="0.2"/>
						</svg>
						<h1>alok gupta</h1>
					</div>
					
					<!-- Life Timer (Moved to Top Right) -->
					<div class="life-timer-container">
						<span class="life-label">On Earth for</span>
						<div class="timer-value">
							<span id="life-timer">Calculating...</span>
							<span class="unit">years</span>
						</div>
					</div>
				</div>
				
				<p class="quote">“The more I know, I know how little I know.”</p>
				
			</div>

			<!-- Contribution Graph -->
			{contributions.length > 0 && (
				<section class="contribution-section animate delay-1">
					<div class="contribution-info">
						<span class="contribution-count">{totalContributions} contributions</span> in the last year
					</div>
					<div class="graph-scroll-container">
						<div class="graph-grid">
							{contributions.map((day) => (
								<div 
									class="contribution-cell" 
									data-level={day.level}
									title={`${day.count} contributions on ${day.date}`}
								></div>
							))}
						</div>
					</div>
				</section>
			)}

			<!-- About Section -->
			<section class="section animate delay-1">
				<h2>about</h2>
			<p>
				I am <b>Alok Gupta</b>, a backend-focused software engineer who enjoys building systems that people actually use. I care deeply about solving real engineering problems and creating software that remains reliable in real-world conditions.
			</p>

			<p>
				I have worked across startups and open-source projects, building production systems and taking ownership from idea to deployment. I learn best by doing, by building, breaking, and improving systems through hands-on experience in live environments.
			</p>

			<p>
				My interests lie in <b>backend engineering</b>, <b>distributed systems</b>, and <b>open source</b>. I enjoy thinking about system design, scalability, and long-term maintainability, and I value strong engineering practices, ownership, and reliability.
			</p>

			<p>
				Outside of work, I like capturing moments and nature, playing cricket occasionally, and sleeping most of the time.
			</p>


			</section>

			<!-- Cool Places I Work (Minimal) -->
			<section class="section animate delay-2">
				<h2>cool places i work</h2>
				<div class="list">
					<!-- FamPay -->
					<div class="list-item work-item">
						<Image src={fampayLogo} alt="FamPay" class="company-logo" />
						<div class="list-details-block">
							<div class="list-header">
								<a href="https://www.famapp.in/" target="_blank" class="list-title link">FamPay</a>
								<span class="list-meta">Upcoming</span>
							</div>
							<p class="list-role">Software Engineer Intern • Bangalore</p>
						</div>
					</div>

					<!-- Grapevine -->
					<div class="list-item work-item">
						<Image src={grapevineLogo} alt="Grapevine" class="company-logo" />
						<div class="list-details-block">
							<div class="list-header">
								<a href="https://www.grapevine.in/home" target="_blank" class="list-title link">Grapevine Round1 AI</a>
								<span class="list-meta">July 2025 – Nov 2025</span>
							</div>
							<p class="list-role">Software Engineer Intern • Bangalore</p>
						</div>
					</div>

					<!-- TakeUForward -->
					<div class="list-item work-item">
						<Image src={takeuforwardLogo} alt="TakeUForward" class="company-logo" />
						<div class="list-details-block">
							<div class="list-header">
								<a href="https://takeuforward.org/" target="_blank" class="list-title link">TakeUForward</a>
								<span class="list-meta">Sep 2024 – July 2025</span>
							</div>
							<p class="list-role">Software Engineer Intern • Remote</p>
						</div>
					</div>

					<!-- GSoC -->
					<div class="list-item work-item">
						<Image src={gsocLogo} alt="GSoC" class="company-logo" />
						<div class="list-details-block">
							<div class="list-header">
								<a href="https://summerofcode.withgoogle.com/archive/2024/projects/izshFtex" target="_blank" class="list-title link">Google Summer of Code</a>
								<span class="list-meta">May 2024 - Aug 2024</span>
							</div>
							<p class="list-role">Open Source Contributor • JSON Schema (Remote)</p>
						</div>
					</div>
				</div>
			</section>

			<!-- Selected Projects -->
			<section class="section animate delay-3">
				<h2>cool things i build at cool places</h2>
				<div class="list">
					<!-- Grapevine Projects -->
					<div class="list-item">
						<div class="list-header">
							<span class="list-title">Reliable Payment & Notification Systems</span>
							<span class="list-meta">Grapevine</span>
						</div>
						<p class="list-role">Architecture & High-Scale Systems</p>
						<ul class="list-bullets">
							<li>Engineered a robust payment system integrating <b>Razorpay, PhonePe, and Apple Pay</b> within a queue-based architecture to ensure 100% reliable order processing.</li>
							<li>Built a high-throughput notification platform serving <b>600k+ users</b>, utilizing batching strategies and direct APNs integration to handle massive traffic spikes efficiently.</li>
							<li>Designed a SQL-based recommendation feed for the Next-Boss feature, optimizing queries to serve relevant content to users in real-time.</li>
						</ul>
					</div>

					<!-- TakeUForward Projects -->
					<div class="list-item">
						<div class="list-header">
							<span class="list-title">Algorithmic Interview Platform</span>
							<span class="list-meta">TakeUForward</span>
						</div>
						<p class="list-role">Full Stack & System Design</p>
						<ul class="list-bullets">
							<li>Architected the entire interview platform from scratch (Frontend, Backend, DB), enabling users to read and share interactive interview stories.</li>
							<li>Developed a custom complex data serializer/deserializer handling <b>1.5 million+ submissions/month</b> for Arrays, Trees, Graphs, and other data structures.</li>
							<li>Implemented comprehensive API monitoring using <b>Prometheus and Grafana</b> to track P50, P99 latency, and error rates across all microservices.</li>
							<li>Built a feature that shows exactly which test case failed with input and output details making debugging much faster.</li>
						</ul>
					</div>

					<!-- GSoC Projects -->
					<div class="list-item">
						<div class="list-header">
							<span class="list-title">CI/CD & Testing Infrastructure</span>
							<span class="list-meta">JSON Schema (GSoC)</span>
						</div>
						<p class="list-role">DevOps & Automation</p>
						<ul class="list-bullets">
							<li>Automated the entire deployment pipeline using <b>GitHub Actions</b>, including link checking, build verification, and automated testing.</li>
							<li>Innovated a custom workflow for <b>Preview Deployments on Forked PRs</b>, overcoming Cloudflare limitations and boosting code review efficiency by 50%.</li>
							<li>Established a complete end-to-end testing suite using <b>Cypress with Codecov</b>, increasing test coverage and code quality metrics by 75%.</li>
						</ul>
					</div>
				</div>
			</section>

			<!-- Education Section -->
			<section class="section animate delay-4">
				<h2>cool places i learn</h2>
				<div class="list">
					<div class="list-item">
						<div class="list-header">
							<span class="list-title">Indian Institute Of Information Technology, Ranchi</span>
							<span class="list-meta">2022 – 2026</span>
						</div>
						<p class="list-role">B.Tech in Computer Science and Engineering (DS & AI)</p>
					</div>
				</div>
			</section>

			<!-- Skills Section -->
			<section class="section animate delay-4">
				<h2>cool things i know</h2>
				<div class="skills-grid">
					<div class="skill-category">
						<span class="skill-label">Languages</span>
						<span class="skill-items">JavaScript, TypeScript, Python, C++, SQL</span>
					</div>
					<div class="skill-category">
						<span class="skill-label">Backend</span>
						<span class="skill-items">Node.js, Express, Django, GraphQL, REST</span>
					</div>
					<div class="skill-category">
						<span class="skill-label">Infrastructure</span>
						<span class="skill-items">Docker, Redis, AWS, GitHub Actions</span>
					</div>
					<div class="skill-category">
						<span class="skill-label">Databases</span>
						<span class="skill-items">MongoDB, MySQL, PostgreSQL</span>
					</div>
				</div>
			</section>

			<!-- Connect Section -->
			<section class="section animate delay-4">
				<h2>connect</h2>
				<div class="links-grid" style="display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap;">
					<a href="https://github.com/aialok" target="_blank">GitHub</a>
					<a href="https://twitter.com/ai_alok" target="_blank">Twitter</a>
					<a href="https://www.linkedin.com/in/aialok/" target="_blank">LinkedIn</a>
					<a href="https://www.instagram.com/ai.alok/" target="_blank">Instagram</a>
				</div>
			</section>

			<!-- Footer Quote -->
			<div class="footer-quote animate delay-5">
				You can just do things
			</div>
		</main>
		<Footer />

		<!-- Scripts -->
		<script>
			// Life Timer Logic (Decimal Years)
			const birthDate = new Date('2003-10-15T00:00:00');
			const timerElement = document.getElementById('life-timer');

			function updateLifeTimer() {
				const now = new Date();
				const diff = now - birthDate;
				const years = diff / (1000 * 60 * 60 * 24 * 365.25);
				
				timerElement.innerText = years.toFixed(9);
				requestAnimationFrame(updateLifeTimer);
			}
			
			updateLifeTimer();

			// Snow Script (Preserved)
			const snowContainer = document.getElementById('snow-container');
			function createSnowflake() {
				const snowflake = document.createElement('div');
				snowflake.innerHTML = '❄';
				snowflake.classList.add('snowflake');
				snowflake.style.left = Math.random() * 100 + 'vw';
				snowflake.style.fontSize = (Math.random() * 0.6 + 0.8) + 'em';
				snowflake.style.opacity = Math.random() * 0.4 + 0.4;
				snowflake.style.animationDuration = (Math.random() * 5 + 3) + 's';
				snowContainer.appendChild(snowflake);
				setTimeout(() => snowflake.remove(), 8000);
			}
			setInterval(createSnowflake, 200);
			for(let i=0; i<30; i++) setTimeout(createSnowflake, Math.random() * 1000);
		</script>

		<style>
			/* Footer Quote Style */
			.footer-quote {
				text-align: center;
				font-family: 'Space Grotesk', sans-serif;
				font-size: 7rem; /* Much larger */
				font-weight: 700; /* Bolder */
				color: var(--text-faint); 
				opacity: 0.12; /* Slightly more subtle at this size */
				margin: 4rem 0 2rem 0;
				line-height: 0.85;
				letter-spacing: -0.05em;
				pointer-events: none; /* Don't interfere with clicks */
				user-select: none;
			}
			.hero {
				padding-bottom: 0.5rem;
			}
			.hero-header-row {
				display: flex;
				justify-content: space-between;
				align-items: flex-end; /* Align bottom of Name and Timer */
				width: 100%;
				margin-bottom: 0.5rem;
			}
			.hero-top {
				width: 100%;
			}
			.quote {
				font-family: 'Space Grotesk', sans-serif;
				font-style: italic;
				color: var(--text-muted); /* Darker, more visible */
				font-size: 1.1rem;
				font-weight: 500; /* Slightly bolder */
				margin-top: 0.5rem; 
				margin-bottom: 0.5rem;
				max-width: 650px;
				line-height: 1.4;
				opacity: 0.9;
			}
			.hero-meta {
				display: flex;
				justify-content: space-between;
				align-items: flex-end; /* Align baselines */
				width: 100%;
				margin-top: 0;
				padding-top: 1.5rem;
				border-top: 1px solid rgba(0,0,0,0.05);
			}
			/* Local Styles for Timer & Lists */
			/* Responsive Design & Fluid Typography */
			@media (max-width: 768px) {
				.hero {
					padding-top: 1rem !important; /* Reduce top spacing */
				}
				.hero-header-row {
					flex-direction: column;
					align-items: flex-start;
					gap: 1.5rem; /* More breathing room */
				}
				h1 {
					font-size: clamp(2.5rem, 12vw, 4.5rem) !important;
					line-height: 1.1; /* Prevent cramping */
					word-break: break-word;
				}
				.svg-hat {
					width: 35px;
					height: 35px;
					top: -22px;
					left: -8px;
				}
				.life-timer-container {
					align-items: flex-start; /* Left align on mobile */
					width: 100%;
					margin-top: 0.5rem;
					padding-bottom: 0;
					padding-left: 0; /* Strict left alignment */
				}
				.life-label {
					text-align: left;
					font-size: 0.75rem;
				}
				.timer-value {
					font-size: clamp(1.4rem, 6vw, 1.8rem);
				}
				.tagline {
					white-space: normal !important;
					overflow-wrap: anywhere;
					word-break: break-word;
					max-width: 100%;
					width: 100%;
					padding-top: 1rem; /* More space from quote */
					font-size: clamp(0.9rem, 3vw, 1.1rem);
					line-height: 1.6; /* Better readability */
					opacity: 0.85; /* Visual heirarchy */
				}
				.footer-quote {
					font-size: clamp(2rem, 12vw, 5rem);
					margin: 4rem 0 2rem 0;
					word-wrap: break-word;
					opacity: 0.08; /* Subtler on mobile */
				}
				.quote {
					font-size: 1rem;
					margin-top: 1rem;
					max-width: 100%;
				}
				/* Add breathing room between list items on mobile */
				.list-item {
					margin-bottom: 2rem !important;
				}
			}
			.tagline .sep {
				color: var(--accent-red);
				margin: 0 0.5rem;
				opacity: 0.8;
			}
			.tagline {
				margin: 0;
				max-width: 100%;
				white-space: nowrap; 
				line-height: 1.5;
				padding-top: 1rem;
			}
			.life-timer-container {
				margin-top: 0;
				display: flex;
				flex-direction: column;
				align-items: flex-end; /* Align right */
				justify-content: center;
				gap: 0; 
				padding-bottom: 0.8rem; /* Optical alignment with H1 baseline */
			}
			.life-label {
				font-family: 'Space Grotesk', sans-serif;
				font-size: 0.7rem;
				font-weight: 600;
				text-transform: uppercase;
				letter-spacing: 0.15em;
				color: var(--text-muted);
				opacity: 1; /* More visible */
				text-align: right;
				margin-bottom: 0.2rem;
			}
			.timer-value {
				font-family: 'Space Grotesk', monospace;
				font-weight: 400; /* Slightly thicker than 300 */
				font-size: 1.8rem; /* Large */
				color: var(--text);
				font-variant-numeric: tabular-nums;
				letter-spacing: -0.04em;
				display: flex;
				align-items: baseline;
				gap: 0.4rem;
				line-height: 1;
			}
			.unit {
				font-family: 'Space Grotesk', sans-serif;
				font-size: 1rem;
				color: var(--text-muted);
				font-weight: 500;
			}

			/* Detailed List Styles */
			.list-role {
				font-size: 0.95rem;
				color: var(--text-muted);
				font-weight: 500;
				margin-bottom: 0.5rem; /* Legacy bottom margin for spacing between bullets? */
				margin-top: 0; /* Force top to 0 */
			}
			.list-bullets {
				margin: 0;
				padding-left: 1.2rem;
				list-style-type: disc;
			}
			.list-bullets li {
				margin-bottom: 0.5rem;
				color: var(--text-muted);
				font-size: 0.95rem;
				line-height: 1.6;
			}
			.company-logo {
				width: 48px;
				height: 48px;
				object-fit: cover;
				border-radius: 50%;
				background: var(--surface-2);
				box-shadow: 0 4px 12px rgba(0,0,0,0.08);
				flex-shrink: 0;
			}
			.list-item { 
				margin-bottom: 1.5rem; 
			}
			.work-item {
				display: flex;
				gap: 1rem;
				align-items: flex-start;
			}
			.list-details-block {
				flex: 1;
				min-width: 0; /* Prevents flex blowout */
				display: flex;
				flex-direction: column;
				gap: 0; /* No implicit gap */
			}
			.list-header { 
				display: flex; 
				justify-content: space-between; 
				align-items: baseline;
				margin-bottom: 0.2rem; /* Small visual gap */
				width: 100%;
				line-height: 1.1;
			}
			.list-role {
				font-size: 0.95rem;
				color: var(--text-muted);
				font-weight: 500;
				margin: 0;
				line-height: 1.3;
			}

			/* Contribution Graph */
			.contribution-section {
				margin-bottom: 0.5rem;
				padding: 0 0.5rem;
			}
			.contribution-info {
				margin-bottom: 0.8rem;
				font-size: 0.9rem;
				color: var(--text-muted);
			}
			.contribution-count {
				color: var(--text);
				font-weight: 600;
			}
			.graph-scroll-container {
				width: 100%;
				overflow-x: auto;
				white-space: nowrap;
				scrollbar-width: none; 
				-ms-overflow-style: none;
				mask-image: linear-gradient(to right, black 95%, transparent 100%); /* Fade out edge */
			}
			.graph-scroll-container::-webkit-scrollbar { display: none; }
			
			.graph-grid {
				display: grid;
				grid-template-rows: repeat(7, 10px);
				grid-auto-flow: column;
				gap: 2px; /* Tighter gap */
				width: max-content;
				padding-bottom: 5px; /* Space for scroll if needed */
			}
			
			.contribution-cell {
				width: 10px;
				height: 10px;
				border-radius: 2px;
				background-color: var(--surface-2); /* Level 0 */
				transition: transform 0.1s ease;
				border: 1px solid var(--cell-border);
				box-sizing: border-box;
			}
			.contribution-cell:hover {
				transform: scale(1.2);
				z-index: 10;
			}
			
			/* Graph Colors (GitHub Standard) */
			:root {
				--graph-0: rgba(255, 255, 255, 0.08); /* Faint grey for dark mode */
				--graph-1: #2b885aff;
				--graph-2: #006d32;
				--graph-3: #26a641;
				--graph-4: #39d353;
				--cell-border: rgba(255, 255, 255, 0.1);
			}
			html.light {
				--graph-0: rgba(0, 0, 0, 0.05); /* Faint grey for light mode */
				--graph-1: #9be9a8;
				--graph-2: #40c463;
				--graph-3: #30a14e;
				--graph-4: #216e39;
				--cell-border: rgba(138, 141, 145, 0.06);
			}

			.contribution-cell[data-level="0"] { background-color: var(--graph-0); }
			.contribution-cell[data-level="1"] { background-color: var(--graph-1); }
			.contribution-cell[data-level="2"] { background-color: var(--graph-2); }
			.contribution-cell[data-level="3"] { background-color: var(--graph-3); }
			.contribution-cell[data-level="4"] { background-color: var(--graph-4); }

		</style>
	</body>
</html>

```
